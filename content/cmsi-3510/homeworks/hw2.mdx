import {
  HomeworkIntro,
  ReadingSection,
  ProgrammingSection,
  OptionalSection,
} from "@/components/homework-sections"
import { QuestionBox } from "@/components/question-box"
import { getHomeworkEvent, formatDate } from "@/lib/homework-metadata"

export const metadata = {
  hwNumber: 2,
  title: "HW2: Life of Pie",
  topics: ["Concurrency", "Threads", "Mutual Exclusion"],
  points: {
    reading: 0,
    programming: 30,
    optional: 20,
  },
}

export const hwEvent = getHomeworkEvent(metadata.hwNumber)

<HomeworkIntro
  title={metadata.title}
  dueDate={formatDate(hwEvent?.date)}
  dueTime={hwEvent?.dueTime || "11:59 PM"}
  topics={metadata.topics}
  description={hwEvent?.description || ""}
/>

This homework assignment is about getting our feet wet with modeling concurrent systems! We are going to be simulating the very concurrent and complex nature of making a Pizza from scratch in a Kitchen with multiple chefs!

<ReadingSection points={metadata.points.reading}>

This simulation is quite intricate and will leverage much of your current Rust knowledge. However, Rust's style of concurrent operation with Tokio and its synchronization primitives is a lot to read through. You will need to make good use of your reading resources to manage them successfully and not get overwhelmed! With what truly little time we have in class, you will need to rely on the reading material to get you the full picture. The sections below give you direct and indirect help with organizing your thoughts about threads, concurrent ownership, and use of synchronization primitives in Rust.

<QuestionBox qid="R1">

In "The Rust Language Book" read:
- Ch 9: Error Handling
- Ch 15: Smart Pointers
- Ch 16: Fearless Concurrency
- Ch 17: Matching

Optionally for help with the homework:
- Ch 15: Smart Pointers
- Ch 17: Fundamentals of Asynchronous Programming: Async, Await, Futures, and Streams

</QuestionBox>

<QuestionBox qid="R2">

While it's not one of your required materials, the Rust by Example docs are associated with the Rust Language Book and are a great resource for understanding the concepts in the book in a more direct programmatic way. You should go through all of it but for now, Read section 18: Error Handling and Section 19: Std Library Types.

[Rust By Example](https://doc.rust-lang.org/rust-by-example/)

</QuestionBox>

<QuestionBox qid="R3">

Don't read this in its entirety, but the Rust Tokio library is a powerful tool for concurrent programming in Rust. It is a bit different from the standard library and is a bit more complex to understand. However, it is a great resource for looking up details related to the use of Futures, Channels, Async and Await, and more in the codebase.

[Tokio Documentation](https://docs.rs/tokio/latest/tokio/)

</QuestionBox>

</ReadingSection>

<ProgrammingSection
  points={metadata.points.programming}
  description="This programming assignment is about implementing a concurrent pizza-making simulation in Rust!"
  githubClassroomUrl="https://classroom.github.com/a/gu_K8XCD"
  brightspaceUrl="https://brightspace.lmu.edu/d2l/le/calendar/283548/event/802217/detailsview?searchString=&year=2025&month=9&day=3&typefilterguid=a2d8e13e-30f9-4dfb-a907-cba23f3502bf"
>

### Repository Structure

Your repository will contain the following files:

```
CMSI-3510-HW2/
├── .gitignore
├── life-of-pie/
│   ├── Cargo.toml
│   ├── Cargo.lock
│   └── src/
│       ├── parallel/
│       │   ├── mod.rs
│       │   ├── data_parallel.rs
│       │   └── task_parallel.rs
│       ├── chef.rs
│       ├── equipment.rs
│       ├── error.rs
│       ├── fridge.rs
│       ├── ingredients.rs
│       ├── kitchen.rs
│       ├── proving_room.rs
│       ├── lib.rs
│       └── main.rs
└── README.md
```

### Helper Resources

This programming homework is brought by Babish! Well not directly, but instead it is modeled after the pizza dough making process laid out in the following video linked below! Make sure to watch this as otherwise the simulator you will be programming will be more than a little confusing.

[Pizza Dough | Basics with Babish](https://www.youtube.com/watch?v=n1O3uHPCOLA)

Need a refresher on how to interact with the HW for this course? Watch the helper video posted to Zoom via the link below!

[Helper Video](https://lmula.zoom.us/rec/share/qZJRL5B3_zx8vvp2ei9qfijhG6Yjqr0g_pap6h6THg_ffJ7_cuuvjdKq-xMF5g0P.rbEK6SGsg5zYXxMi)

You can find the GitHub Classroom assignment link and the Brightspace turn in link using the buttons at the top of this section.

</ProgrammingSection>

<OptionalSection
  points={metadata.points.optional}
  brightspaceUrl="https://brightspace.lmu.edu/d2l/le/calendar/283548/event/802215/detailsview?searchString=&year=2025&month=9&day=3&typefilterguid=a2d8e13e-30f9-4dfb-a907-cba23f3502bf"
>

## Optional Section For Concurrent Programming

In this optional section you will be working on a small beginner Rust project of your choosing! After looking around for some fun project ideas, I found this great article from ZTM.io's Jayson Lennon!

[Jayson Lennon's Rust Practice Projects](https://zerotomastery.io/blog/rust-practice-projects/)

Whilst the intermediate and advanced projects are certainly "out of our league" at the moment, the beginner projects Jayson lays out are insightful, simple, and fun!

For this optional I want you to read that article and pick one of the beginner projects that Jayson recommends! Complete the basic implementation of the project and then provide at least 5 to 10 unit tests that display your implementations working as expected.

I have made an empty Github assignment for you to pull and create your Rust project from scratch (This is out of convenience so that I can use Github classroom to collate all your projects rather than go through being added to all the repos). Feel free to architect your project as you choose, however at a minimum you must have at least 5 unit tests that are run and pass with the cargo test command.

Additionally, provide a brief README.md file that explains what project you chose and how to interact with it. If you are doing anything "non-standard" that is Ok, just document that in the README.md.

Since the repository is private, feel free after you are done to copy it over into a public repository to show off on your Github!

### Grading Criteria

Earning points in this optional is not as rigid since you may pick your own project. With that said, to earn full points you must fully implement one of the beginner projects as stated by Jayson, have a README.md, and have at a minimum 5 unit tests pass with the cargo test command. You do not have to do any of the add-ons or extensions that Jayson recommends.

As an example, if you did the beginner project about remaking core terminal utilities than I would expect to be able to run your version of echo, cat, ls, find, and grep, that I could figure out where to start by looking at your project README (Your commands don't need to be terminal integrated or anything, but there functionality should be intact through whatever medium you choose), and that I could clone the repository to run cargo test and see at least 5 passes (In this case one for each command).

### Submission Links

Below are buttons that link to the Github Optional Assignment repository. The Brightspace submission link is at the top of this section.

[Github Optional Assignment](https://classroom.github.com/a/jnJhV7YB)

</OptionalSection>

